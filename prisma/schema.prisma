generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Group {
  id            String  @id @default(cuid())
  groupName     String
  logoUrl       String?
  adminID       String  @unique
  administrator User    @relation("admin", fields: [adminID], references: [id])
  users         User[]  @relation("user")
}

model User {
  id         String  @id @default(cuid())
  username   String
  password   String
  name       String
  pictureUrl String?
  mail       String
  starSign   String
  groupID    String?
  cakes      Cake[]
  reviews    Review[]
  groupAdmin Group?  @relation("admin")
  group      Group?  @relation("user", fields: [groupID], references: [id])
}

model Cake {
  id         Int      @id @default(autoincrement())
  name       String
  pictureUrl String?
  bakerName  String
  userID     String
  user       User     @relation(fields: [userID], references: [id], onDelete: Cascade)
  reviews    Review[]
}

model Review {
  id     String @id @default(cuid())
  rating Int
  cakeId Int
  cake   Cake   @relation(fields: [cakeId], references: [id], onDelete: Cascade)
  reviewer User      @relation(references: [id], fields: [reviewerID], onDelete: Cascade)
  reviewerID String
}
